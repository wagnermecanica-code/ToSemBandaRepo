SETUP_GO_ROUTER_TYPED.md
# SETUP GO_ROUTER COM TYPED ROUTES + DEEP LINKS — EXECUTAR AGORA

Você está no projeto WeGig (já com Clean Architecture + Riverpod + todas as features migradas).

Agora substitua qualquer navegação atual (Navigator 2.0 ou rotas nomeadas) por go_router com typed routes, deep linking e auth guard.

Execute exatamente nesta ordem:

1. Adicione as dependências:
   go_router: ^14.2.0
   go_router_builder: ^2.7.0
   riverpod_annotation: ^3.0.0 (já tem)

2. Crie o arquivo lib/app/router/app_router.dart com esta estrutura completa:

```dart
// lib/app/router/app_router.dart
import 'package:flutter/material.dart';
import 'package:go_router/go_router.dart';
import 'package:riverpod_annotation/riverpod_annotation.dart';
import 'package:wegig_app/features/auth/presentation/pages/auth_page.dart';
import 'package:wegig_app/features/home/presentation/pages/home_page.dart';
import 'package:wegig_app/features/profile/presentation/pages/view_profile_page.dart';
import 'package:wegig_app/features/post/presentation/pages/post_detail_page.dart';
import 'package:wegig_app/features/messages/presentation/pages/chat_detail_page.dart';
import 'package:wegig_app/core/di/profile_providers.dart';

part 'app_router.g.dart';

@riverpod
GoRouter goRouter(GoRouterRef ref) {
  final authState = ref.watch(authStateProvider);

  return GoRouter(
    initialLocation: '/home',
    redirect: (context, state) {
      final isLoggedIn = authState.valueOrNull != null;
      final isGoingToAuth = state.subloc == '/auth';

      if (!isLoggedIn && !isGoingToAuth) return '/auth';
      if (isLoggedIn && isGoingToAuth) return '/home';
      return null;
    },
    routes: [
      GoRoute(
        path: '/auth',
        name: AppRoute.auth.name,
        builder: (context, state) => const AuthPage(),
      ),
      GoRoute(
        path: '/home',
        name: AppRoute.home.name,
        builder: (context, state) => const HomePage(),
      ),
      GoRoute(
        path: '/profile/:profileId',
        name: AppRoute.profile.name,
        builder: (context, state) => ViewProfilePage(
          profileId: state.pathParameters['profileId']!,
        ),
      ),
      GoRoute(
        path: '/post/:postId',
        name: AppRoute.postDetail.name,
        builder: (context, state) => PostDetailPage(
          postId: state.pathParameters['postId']!,
        ),
      ),
      GoRoute(
        path: '/chat/:conversationId',
        name: AppRoute.chat.name,
        builder: (context, state) => ChatDetailPage(
          conversationId: state.pathParameters['conversationId']!,
        ),
      ),
    ],
    errorBuilder: (context, state) => Scaffold(
      body: Center(child: Text('Página não encontrada: ${state.uri}')),
    ),
  );
}

@TypedGoRoute<AuthRoute>(path: '/auth')
@TypedGoRoute<HomeRoute>(path: '/home')
@TypedGoRoute<ProfileRoute>(path: '/profile/:profileId')
@TypedGoRoute<PostDetailRoute>(path: '/post/:postId')
@TypedGoRoute<ChatRoute>(path: '/chat/:conversationId')
sealed class AppRoute {
  const AppRoute._();
  static const auth = AuthRoute();
  static const home = HomeRoute();
  static const profile = ProfileRoute();
  static const postDetail = PostDetailRoute();
  static const chat = ChatRoute();
}